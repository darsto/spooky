CMAKE_MINIMUM_REQUIRED(VERSION 3.0)
PROJECT(c003)

SET(CMAKE_RUNTIME_OUTPUT_DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}/bin")
SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11")

SET(SOURCE_FILES main.cpp android.cpp)

if (ANDROID)
    ADD_LIBRARY(${PROJECT_NAME} SHARED ${SOURCE_FILES})
    INCLUDE_DIRECTORIES(${ANDROID_NDK}/platforms/android-8/arch-arm/usr/include)
else ()
    ADD_EXECUTABLE(${PROJECT_NAME} ${SOURCE_FILES})
endif ()

INCLUDE_DIRECTORIES(src)

ADD_SUBDIRECTORY(src)

if (NOT ANDROID)
    ADD_SUBDIRECTORY(tests)
endif ()

TARGET_LINK_LIBRARIES(${PROJECT_NAME} c003_game)
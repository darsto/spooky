CMAKE_MINIMUM_REQUIRED(VERSION 2.8.12)
PROJECT(c003)

SET(CMAKE_CONFIGURATION_TYPES "Game;Debug;Editor;EditorDebug;Simulation" CACHE STRING "" FORCE)
SET(CMAKE_RUNTIME_OUTPUT_DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}/bin")
SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++14 -iquote ${CMAKE_CURRENT_SOURCE_DIR}/src")

if (CMAKE_BUILD_TYPE MATCHES Debug OR CMAKE_BUILD_TYPE MATCHES EditorDebug OR CMAKE_BUILD_TYPE MATCHES Simulation)
    SET(DEBUG 1)
endif ()

if (CMAKE_BUILD_TYPE MATCHES Simulation)
    SET(SIMULATION 1)
endif ()

if (ANDROID)
    INCLUDE_DIRECTORIES(${ANDROID_NDK}/platforms/android-8/arch-arm/usr/include)
    INCLUDE_DIRECTORIES(src)
    ADD_SUBDIRECTORY(src)
else ()
    if (CMAKE_BUILD_TYPE MATCHES Editor)
        SET(EDITOR 1)
        if (DEBUG)
            SET(CMAKE_BUILD_TYPE Debug)
        endif ()
        INCLUDE_DIRECTORIES(src)
        ADD_EXECUTABLE(${PROJECT_NAME}_editor main.cpp)
        ADD_SUBDIRECTORY(src)
        TARGET_LINK_LIBRARIES(${PROJECT_NAME}_editor c003_game_editor)
    else ()
        INCLUDE_DIRECTORIES(src)
        ADD_EXECUTABLE(${PROJECT_NAME} main.cpp)
        ADD_SUBDIRECTORY(src)
        if (NOT MINGW)
            ADD_SUBDIRECTORY(tests)
        endif ()
        TARGET_LINK_LIBRARIES(${PROJECT_NAME} c003_game)
    endif ()
endif ()